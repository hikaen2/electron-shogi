import{d as b,o as c,i as l,v as h,O as et,y as C,z as H,A as K,j as a,D as x,s as u,t as k,_ as $,aB as st,F as m,l as w,$ as V,k as Q,aa as it}from"./HorizontalSelector-Blz5DCYV.js";const j={};function ot(t){if(j[t])return;const e=document.createElement("img");e.src=t,j[t]=e}var N=(t=>(t.BUSY="busy",t.ERROR="error",t.INFO="info",t.GAME="game",t.INTERNET="internet",t.STOP="stop",t.RESIGN="resign",t.RESEARCH="research",t.END="end",t.QUIZ="quiz",t.EDIT="edit",t.CHECK="check",t.SWAP="swap",t.SWAP_H="swap_h",t.SETTINGS="settings",t.ENGINE_SETTINGS="engineSettings",t.FLIP="flip",t.FILE="file",t.OPEN="open",t.SAVE="save",t.SAVE_AS="saveAs",t.PASTE="paste",t.COPY="copy",t.DELETE="delete",t.COMMENT="comment",t.BRAIN="brain",t.PV="pv",t.CHART="chart",t.PERCENT="percent",t.MONITOR="monitor",t.ARROW_DROP="arrowDrop",t.ARROW_UP="arrowUp",t.FIRST="first",t.BACK="back",t.NEXT="next",t.LAST="last",t.QUESTION="question",t.ANALYSIS="analysis",t.DESCRIPTION="description",t.PLAY="play",t.CLOSE="close",t.CALL="call",t.SCORE="score",t.GRID="grid",t.MATE_SEARCH="mateSearch",t.ADD="add",t.TREE="tree",t.NOTE="note",t.BATCH="batch",t.OPEN_FOLDER="openFolder",t.HISTORY="history",t.PAUSE="pause",t.RESUME="resume",t.HELP="help",t.EQUALIZER="equalizer",t.REFRESH="refresh",t))(N||{});const Y={busy:"icon/hourglass_empty_white_24dp.svg",error:"icon/error_outline_white_24dp.svg",info:"icon/info_white_24dp.svg",game:"icon/sports_esports_white_24dp.svg",internet:"icon/language_FILL0_wght400_GRAD0_opsz48.svg",stop:"icon/block_white_24dp.svg",resign:"icon/flag_white_24dp.svg",research:"icon/science_white_24dp.svg",end:"icon/do_disturb_on_white_24dp.svg",quiz:"icon/quiz_FILL0_wght400_GRAD0_opsz48.svg",edit:"icon/app_registration_white_24dp.svg",check:"icon/check_circle_white_24dp.svg",swap:"icon/swap_vert_white_24dp.svg",swap_h:"icon/swap_horiz_white_24dp.svg",settings:"icon/settings_white_24dp.svg",engineSettings:"icon/settings_input_component_white_24dp.svg",flip:"icon/flip_camera_android_white_24dp.svg",file:"icon/draft_FILL0_wght400_GRAD0_opsz48.svg",open:"icon/file_open_FILL0_wght400_GRAD0_opsz48.svg",save:"icon/save_FILL0_wght400_GRAD0_opsz48.svg",saveAs:"icon/save_as_FILL0_wght400_GRAD0_opsz48.svg",paste:"icon/content_paste_white_24dp.svg",copy:"icon/content_copy_white_24dp.svg",delete:"icon/backspace_white_24dp.svg",comment:"icon/edit_note_white_24dp.svg",brain:"icon/psychology_white_24dp.svg",pv:"icon/manage_search_FILL0_wght400_GRAD0_opsz48.svg",chart:"icon/show_chart_white_24dp.svg",percent:"icon/percent_white_24dp.svg",monitor:"icon/browse_activity_FILL0_wght400_GRAD0_opsz24.svg",arrowDrop:"icon/arrow_drop_down_white_24dp.svg",arrowUp:"icon/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg",first:"icon/first_page_white_24dp.svg",back:"icon/chevron_left_white_24dp.svg",next:"icon/chevron_right_white_24dp.svg",last:"icon/last_page_white_24dp.svg",question:"icon/help_white_24dp.svg",analysis:"icon/query_stats_white_24dp.svg",description:"icon/description_white_24dp.svg",play:"icon/play_arrow_FILL1_wght400_GRAD0_opsz48.svg",close:"icon/close_FILL0_wght400_GRAD0_opsz48.svg",call:"icon/record_voice_over_FILL0_wght400_GRAD0_opsz48.svg",score:"icon/scoreboard_FILL0_wght400_GRAD0_opsz48.svg",grid:"icon/grid_on_FILL0_wght400_GRAD0_opsz48.svg",mateSearch:"icon/psychology_alt_FILL0_wght400_GRAD0_opsz48.svg",add:"icon/add_circle_FILL0_wght400_GRAD0_opsz48.svg",tree:"icon/account_tree_FILL0_wght400_GRAD0_opsz48.svg",note:"icon/note_alt_FILL0_wght400_GRAD0_opsz48.svg",batch:"icon/home_storage_FILL0_wght400_GRAD0_opsz48.svg",openFolder:"icon/folder_open_FILL0_wght400_GRAD0_opsz48.svg",history:"icon/history_FILL0_wght400_GRAD0_opsz48.svg",pause:"icon/pause_circle_FILL0_wght400_GRAD0_opsz24.svg",resume:"icon/play_circle_FILL0_wght400_GRAD0_opsz24.svg",help:"icon/help_FILL0_wght400_GRAD0_opsz24.svg",equalizer:"icon/instant_mix_FILL0.svg",refresh:"icon/refresh_FILL0.svg"};Object.values(Y).forEach(t=>{ot(t)});const nt=["src"],q=b({__name:"Icon",props:{icon:{type:String,required:!0}},setup(t){return(e,s)=>(c(),l("img",{class:"icon",src:h(Y)[t.icon],draggable:"false"},null,8,nt))}});function U(t,e){t.addEventListener("cancel",s=>{s.preventDefault(),s.stopPropagation(),e==null||e()}),t.addEventListener("keydown",s=>{s.key==="Escape"&&(s.preventDefault(),s.stopPropagation(),e==null||e())}),t.addEventListener("copy",s=>{s.stopPropagation()}),t.addEventListener("paste",s=>{s.stopPropagation()}),t.showModal()}class y{constructor(e){this.children=[],this.parent=e}delete(e){const s=this.children.indexOf(e);return s===-1?!1:(this.children=this.children.slice(0,s).concat(this.children.slice(s+1)),this.children.length===0&&this.parent.delete(this),!0)}add(e){return this.children.push(e),this}}class D{constructor(e){this.parent=null,this.children={},this.parent=e||null}get(e){return this.children[e]}insert(e){let s=this;for(let i=0;i<e.length;i+=1){const o=e[i];let n=s.get(o);if(i===e.length-1)return n instanceof D&&(s.delete(n),n=null),n||(n=new y(s),s.children[o]=n),n;n instanceof y&&(n=null),n||(n=new D(s),s.children[o]=n),s=n}return s}delete(e){for(const s in this.children)if(this.children[s]===e){const o=delete this.children[s];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),o}return!1}}const rt={"¡":"1","™":"2","£":"3","¢":"4","∞":"5","§":"6","¶":"7","•":"8",ª:"9",º:"0","–":"-","≠":"=","⁄":"!","€":"@","‹":"#","›":"$",ﬁ:"%",ﬂ:"^","‡":"&","°":"*","·":"(","‚":")","—":"_","±":"+",œ:"q","∑":"w","®":"r","†":"t","¥":"y",ø:"o",π:"p","“":"[","‘":"]","«":"\\",Œ:"Q","„":"W","´":"E","‰":"R","ˇ":"T",Á:"Y","¨":"U","ˆ":"I",Ø:"O","∏":"P","”":"{","’":"}","»":"|",å:"a",ß:"s","∂":"d",ƒ:"f","©":"g","˙":"h","∆":"j","˚":"k","¬":"l","…":";",æ:"'",Å:"A",Í:"S",Î:"D",Ï:"F","˝":"G",Ó:"H",Ô:"J","":"K",Ò:"L",Ú:":",Æ:'"',Ω:"z","≈":"x",ç:"c","√":"v","∫":"b",µ:"m","≤":",","≥":".","÷":"/","¸":"Z","˛":"X",Ç:"C","◊":"V",ı:"B","˜":"N",Â:"M","¯":"<","˘":">","¿":"?"},at={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+","[":"{","]":"}","\\":"|",";":":","'":'"',",":"<",".":">","/":"?",q:"Q",w:"W",e:"E",r:"R",t:"T",y:"Y",u:"U",i:"I",o:"O",p:"P",a:"A",s:"S",d:"D",f:"F",g:"G",h:"H",j:"J",k:"K",l:"L",z:"Z",x:"X",c:"C",v:"V",b:"B",n:"N",m:"M"},ct={" ":"Space","+":"Plus"};function Z(t,e=navigator.platform){var s,i,o;const{ctrlKey:n,altKey:r,metaKey:_,shiftKey:L,key:f}=t,g=[],O=[n,r,_,L];for(const[v,A]of O.entries())A&&g.push(I[v]);if(!I.includes(f)){const v=g.includes("Alt")&&G.test(e)&&(s=rt[f])!==null&&s!==void 0?s:f,A=g.includes("Shift")&&G.test(e)&&(i=at[v])!==null&&i!==void 0?i:v,tt=(o=ct[A])!==null&&o!==void 0?o:A;g.push(tt)}return g.join("+")}const I=["Control","Alt","Meta","Shift"];function lt(t,e){let s;return s=_t(t),s=dt(s),s}const G=/Mac|iPod|iPhone|iPad/i;function _t(t,e){var s;const i=typeof window>"u"?void 0:window,o=(s=i==null?void 0:i.navigator.platform)!==null&&s!==void 0?s:"",n=G.test(o)?"Meta":"Control";return t.replace("Mod",n)}function dt(t){const e=t.split("+").pop(),s=[];for(const i of["Control","Alt","Meta","Shift"])t.includes(i)&&s.push(i);return e&&s.push(e),s.join("+")}const X=" ";class z{constructor({onReset:e}={}){this._path=[],this.timer=null,this.onReset=e}get path(){return this._path}get sequence(){return this._path.join(X)}registerKeypress(e){this._path=[...this._path,Z(e)],this.startTimer()}reset(){var e;this.killTimer(),this._path=[],(e=this.onReset)===null||e===void 0||e.call(this)}killTimer(){this.timer!=null&&window.clearTimeout(this.timer),this.timer=null}startTimer(){this.killTimer(),this.timer=window.setTimeout(()=>this.reset(),z.CHORD_TIMEOUT)}}z.CHORD_TIMEOUT=1500;function M(t){if(!(t instanceof HTMLElement))return!1;const e=t.nodeName.toLowerCase(),s=(t.getAttribute("type")||"").toLowerCase();return e==="select"||e==="textarea"||e==="input"&&s!=="submit"&&s!=="reset"&&s!=="checkbox"&&s!=="radio"&&s!=="file"||t.isContentEditable}function ht(t,e){const s=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:e}});t.dispatchEvent(s)&&(M(t)?t.focus():t.click())}function ut(t){const e=[];let s=[""],i=!1;for(let o=0;o<t.length;o++){if(i&&t[o]===","){e.push(s),s=[""],i=!1;continue}if(t[o]===X){s.push(""),i=!1;continue}else t[o]==="+"?i=!1:i=!0;s[s.length-1]+=t[o]}return e.push(s),e.map(o=>o.map(n=>lt(n)).filter(n=>n!=="")).filter(o=>o.length>0)}const E=new D,J=new WeakMap;let P=E;const R=new z({onReset(){P=E}});function T(t){if(t.defaultPrevented||!(t.target instanceof Node))return;if(M(t.target)){const s=t.target;if(!s.id||!s.ownerDocument.querySelector(`[data-hotkey-scope="${s.id}"]`))return}const e=P.get(Z(t));if(!e){R.reset();return}if(R.registerKeypress(t),P=e,e instanceof y){const s=t.target;let i=!1,o;const n=M(s);for(let r=e.children.length-1;r>=0;r-=1){o=e.children[r];const _=o.getAttribute("data-hotkey-scope");if(!n&&!_||n&&s.id===_){i=!0;break}}o&&i&&(ht(o,R.path),t.preventDefault()),R.reset()}}function gt(t,e){Object.keys(E.children).length===0&&document.addEventListener("keydown",T);const i=ut(t.getAttribute("data-hotkey")||"").map(o=>E.insert(o).add(t));J.set(t,i)}function ft(t){const e=J.get(t);if(e&&e.length)for(const s of e)s&&s.delete(t);Object.keys(E.children).length===0&&document.removeEventListener("keydown",T)}function S(t){for(const e of t.querySelectorAll("[data-hotkey]"))gt(e)}function F(t){for(const e of t.querySelectorAll("[data-hotkey]"))ft(e)}const p=[],d=[];function Mt(t){d.length===0&&S(t),p.push(t)}function Pt(t){d.length===0&&F(t);for(let e=0;e<p.length;e++)if(p[e]===t){p.splice(e,1);break}}function B(t){if(d.length===0)for(const e of p)F(e);else F(d[d.length-1]);S(t),d.push(t)}function W(t){for(let e=0;e<d.length;e++)if(d[e]===t){d.splice(e,1),e===d.length&&F(t);break}if(d.length===0)for(const e of p)S(e);else S(d[d.length-1])}const pt={class:"message-box"},vt={class:"message"},mt={class:"main-buttons"},wt=b({__name:"ConfirmDialog",setup(t){const e=et(),s=C(),i=()=>{e.ok()},o=()=>{e.cancel()};return H(()=>{U(s.value,o),B(s.value)}),K(()=>{W(s.value)}),(n,r)=>(c(),l("div",null,[a("dialog",{ref_key:"dialog",ref:s,class:"confirm"},[a("div",pt,[x(q,{icon:h(N).QUESTION},null,8,["icon"]),a("div",vt,u(h(e).message),1)]),a("div",mt,[a("button",{"data-hotkey":"Enter",autofocus:"",onClick:r[0]||(r[0]=_=>i())},"OK"),a("button",{"data-hotkey":"Escape",onClick:r[1]||(r[1]=_=>o())},u(h(k).cancel),1)])],512)]))}}),Ct=$(wt,[["__scopeId","data-v-212ce444"]]),Et={class:"message-box"},Lt={class:"message"},At={key:0,class:"list"},Rt={class:"main-buttons"},kt=b({__name:"InfoMessage",setup(t){const e=st(),s=C();H(()=>{U(s.value,i),B(s.value)}),K(()=>{W(s.value)});const i=()=>{e.dequeue()};return(o,n)=>(c(),l("div",null,[a("dialog",{ref_key:"dialog",ref:s,class:"info"},[a("div",Et,[x(q,{icon:h(N).INFO},null,8,["icon"]),a("div",Lt,[(c(!0),l(m,null,w(h(e).message.text.split(`
`),(r,_)=>(c(),l("div",{key:_},u(r),1))),128))])]),(c(!0),l(m,null,w(h(e).message.attachments,(r,_)=>(c(),l("div",{key:_,class:"attachment"},[r.type==="list"?(c(),l("ul",At,[(c(!0),l(m,null,w(r.items,(L,f)=>(c(),l("li",{key:f,class:"list-item"},[V(u(L.text)+" ",1),a("ul",null,[(c(!0),l(m,null,w(L.children,(g,O)=>(c(),l("li",{key:O,class:"list-child-item"},u(g),1))),128))])]))),128))])):Q("",!0)]))),128)),a("div",Rt,[a("button",{autofocus:"","data-hotkey":"Escape",onClick:n[0]||(n[0]=r=>i())},u(h(k).close),1)])],512)]))}}),Ht=$(kt,[["__scopeId","data-v-77b41192"]]),Dt={class:"message-box"},St={class:"column"},Ft={class:"notice"},bt={class:"index"},Nt={key:0},zt={class:"message"},Ot={class:"main-buttons"},yt=b({__name:"ErrorMessage",setup(t){const e=it(),s=C();H(()=>{U(s.value,i),B(s.value)}),K(()=>{W(s.value)});const i=()=>{e.clear()};return(o,n)=>(c(),l("div",null,[a("dialog",{ref_key:"dialog",ref:s,class:"error"},[a("div",Dt,[x(q,{icon:h(N).ERROR},null,8,["icon"]),a("div",St,[a("div",Ft,u(h(k).errorsOccurred(h(e).errors.length)),1),(c(!0),l(m,null,w(h(e).errors,(r,_)=>(c(),l("div",{key:_,class:"item"},[a("p",bt,[V(u(_+1)+" ",1),r.count>=2?(c(),l("span",Nt,"("+u(r.count)+" 回)",1)):Q("",!0)]),a("p",zt,u(r.message),1)]))),128))])]),a("div",Ot,[a("button",{autofocus:"","data-hotkey":"Escape",onClick:n[0]||(n[0]=r=>i())},u(h(k).close),1)])],512)]))}}),Kt=$(yt,[["__scopeId","data-v-d267f904"]]);export{Ct as C,Kt as E,N as I,q as _,Mt as a,Pt as b,Ht as c,B as i,ot as p,U as s,W as u};
